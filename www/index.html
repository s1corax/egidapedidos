<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title>Egida Pedidos</title>
    </head>
    <body onload='init();'>
        <script type="text/javascript" src="js/cordova.js"></script>
		<script type="text/javascript" src="js/jquery-1.5.min.js"></script>
	
		<script>
			function init(){	
			
					/*$.getJSON('http://localhost/RespuestaJSON/respuesta.php',function(data){
					
					
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $('<tr>');
									tr.append('<td>' + data[i].ID_TELA + '</td>');
									tr.append('<td>' + data[i].COD_TELA + '</td>');
									tr.append('<td>' + data[i].NOMBRE_TELA + '</td>');
								$('#tabla').append(tr);
							}
					});	*/
					//DISENO
					//$.getJSON('http://localhost/RespuestaJSON/diseno.php',function(data){
					$.getJSON('http://egida.cl/RespuestaJSON/diseno.php',function(data){					
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $("<option value='" + data[i].COD_DISENO + "'>" + data[i].NOMBRE_DISENO + "</option>");									
								$('#diseno').append(tr);
							}
					});	
					//TELA
					//$.getJSON('http://egida.cl/RespuestaJSON/diseno.php',function(data){	
					$.getJSON('http://egida.cl/RespuestaJSON/tela.php',function(data){
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $("<option value='" + data[i].COD_TELA + "'>" + data[i].NOMBRE_TELA + "</option>");									
								$('#tela').append(tr);
							}
					}).error(function(data) { alert("error "+ data.length); });
					
					/*error(function(jqXHR, textStatus, errorThrown) {
						alert("error " + textStatus + " incoming Text " + jqXHR.responseText);
					});*/
					
					//error(function(data) { alert("error"); });
					//SEXO
					$.getJSON('http://egida.cl/RespuestaJSON/sexo.php',function(data){
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $("<option value='" + data[i].COD_SEXO + "'>" + data[i].NOMBRE_SEXO + "</option>");									
								$('#sexo').append(tr);
							}
					});	
					//PRENDA
					$.getJSON('http://egida.cl/RespuestaJSON/prenda.php',function(data){
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $("<option value='" + data[i].COD_PRENDA + "'>" + data[i].NOMBRE_PRENDA + "</option>");									
								$('#prenda').append(tr);
							}
					});	
					//TALLA
					$.getJSON('http://egida.cl/RespuestaJSON/talla.php',function(data){
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $("<option value='" + data[i].COD_TALLA + "'>" + data[i].NOMBRE_TALLA + "</option>");									
								$('#talla').append(tr);
							}
					});	
					//COLOR
					$.getJSON('http://egida.cl/RespuestaJSON/color.php',function(data){
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $("<option value='" + data[i].COD_COLOR + "'>" + data[i].NOMBRE_COLOR + "</option>");									
								$('#color').append(tr);
							}
					});	
					//HILO
					$.getJSON('http://egida.cl/RespuestaJSON/hilo.php',function(data){
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $("<option value='" + data[i].COD_HILO + "'>" + data[i].NOMBRE_HILO + "</option>");									
								$('#hilo').append(tr);
							}
					});	
					//VIVO
					$.getJSON('http://egida.cl/RespuestaJSON/vivo.php',function(data){
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $("<option value='" + data[i].COD_VIVO + "'>" + data[i].NOMBRE_VIVO + "</option>");									
								$('#vivo').append(tr);
							}
					});	
					//ESTAMPADO
					$.getJSON('http://egida.cl/RespuestaJSON/estampado.php',function(data){
					//console.log(JSON.stringify(data));
						var datos;
						var tr;
							for (var i = 0; i < data.length; i++){
								tr = $("<option value='" + data[i].COD_ESTAMPADO + "'>" + data[i].NOMBRE_ESTAMPADO + "</option>");									
								$('#estampado').append(tr);
							}
					});	
					
					
										
				}
				
			$(function(){	
				$("#guardardatos").click(function(){
				
					var finstitucion = $("#institucion").val();
					var fsector = $("#sector").val();
					var ffono = $("#fono").val();					
					var fcomentario = $("#comentario").val();
					var fvendedor = 1;
					
					var fdiseno = $("#diseno").val();
					var ftela = $("#tela").val();
					var fsexo = $("#sexo").val();
					var fprenda = $("#prenda").val();
					var fcolor = $("#color").val();
					var fhilo = $("#hilo").val();
					var fvivo = $("#vivo").val();
					var festampado = $("#estampado").val();
					
					
					
					$.ajax({
						type       : "POST",
						url        : "http://egida.cl/RespuestaJSON/guardar.php",
						data       : {							
									  institucion : finstitucion,
									  sector : fsector,
									  fono : ffono,
									  comentario : fcomentario,
									  vendedor : fvendedor,
									  diseno : fdiseno,
									  tela : ftela,
									  sexo : fsexo,
									  prenda : fprenda,
									  color : fcolor,
									  hilo : fhilo,
									  vivo : fvivo,
									  estampado : festampado
									  
									  },
						dataType: 'text',
						cache: false,	
						success    : function(response) {
						console.error(JSON.stringify(response));
							alert('Pedido Enviado!');
							
						},
						error      : function() {
							//console.error("error");
							alert('Error en el Pedido!');                  
						}	
					}); 
				});		

			});		
			</script>
			<!-- <script>
				$.ajax({
					type       : "POST",
					url        : "http://localhost/RespuestaJSON/guardar.php",
					crossDomain: true,
					beforeSend : function() {$.mobile.loading('show')},
					complete   : function() {$.mobile.loading('hide')},
					data       : {username : 'subin', password : 'passwordx'},
					dataType: 'jsonp',
					cache: false,
					success    : function(response) {
						//console.error(JSON.stringify(response));
						alert('Works!');
					},
					error      : function() {
						//console.error("error");
						alert('Not working!');                  
					}
				});     
        </script> 
		
		<script type="text/javascript">
         
            function submitForm() {
                 
                var uname = $('[name="username"]').val();
                var _email = $('[name="email"]').val();
                 
                window.localStorage.setItem("username", uname);
                window.localStorage['email'] = _email;
                 
                $.mobile.changePage( "#page2", { reverse: false, transition: "slide" } );
                 
                $('#output').html("Username: " + window.localStorage.getItem("username") + "<br>" + 
                                    "Email: " + window.localStorage["email"]
                                );
                     
                return false;
            }
 
 
        </script>-->
  <div data-theme="b" data-role="header">
                <h1><font color="blue">EGIDA PEDIDOS</font></h1>
            </div>		
		
<div data-role="content">	
<form method="POST" onsubmit="return submitForm()">	

	<TABLE style='border:1px solid #330066'>
<TR>
	
	<TD>
            
	<TABLE style='border:1px solid #990000'>
	
	<!-- Categorias -->
	
	<TR>
		<TD><B>Instituci&oacute;n</B></TD>
		<TD>:</TD>
		<TD><input type="text" name='institucion' id='institucion' >		
		</TD>	
	</TR>	
	<TR>
		<TD><B>Sector</B></TD>
		<TD>:</TD>
		<TD><input type="text" name='sector' id='sector' >		
		</TD>	
	</TR>	
	<TR>
		<TD><B>Tel&eacute;fono</B></TD>
		<TD>:</TD>
		<TD><input type="text" name='fono' id='fono' >		
		</TD>	
	</TR>	
	<TR>
		<TD><B>Dise&ntilde;o</B></TD>
		<TD>:</TD>
		<TD><select name='diseno' id='diseno' >		
		</select>
		</TD>	
	</TR>	
	<TR>
		<TD><B>Tela</B></TD>
		<TD>:</TD>
		<TD><select name='tela' id='tela' >
		
		</select>
		</TD>
	</TR>
	<TR>
		<TD><B>Sexo</B></TD>
		<TD>:</TD>
		<TD><select name='sexo' id='sexo'>
		
		</select>
		</TD>
	</TR>
	<TR>
		<TD><B>Prenda</B></TD>
		<TD>:</TD>
		<TD><select name='prenda' id='prenda' >
		
		</select>
		</TD>
	</TR>
	<TR>
		<TD><B>Talla</B></TD>
		<TD>:</TD>
		<TD><select name='talla' id='talla'>
		
		</select>
		</TD>
	</TR>
	<TR>
		<TD><B>Color</B></TD>
		<TD>:</TD>
		<TD><select name='color' id='color'>
		
		</select>
		</TD>
	</TR>
	<TR>
		<TD><B>Hilo</B></TD>
		<TD>:</TD>
		<TD><select name='hilo' id='hilo'>
		
		</select>
		</TD>
	</TR>
	<TR>
		<TD><B>Vivo</B></TD>
		<TD>:</TD>
		<TD><select name='vivo' id='vivo'>
		
		</select>
		</TD>
	</TR>
	<TR>
		<TD><B>Estampado</B></TD>
		<TD>:</TD>
		<TD><select name='estampado' id='estampado'>
		
		</select>
		</TD>
	</TR>
	<TR>
		<TD><B>Comentario</B></TD>
		<TD>:</TD>
		<TD><input type="text" name='comentario' id='comentario' >		
		</TD>	
	</TR>	
    </table> 
<button type="button" id="guardardatos">Enviar</button>
</form>	
  </div>


    </body>
</html>
